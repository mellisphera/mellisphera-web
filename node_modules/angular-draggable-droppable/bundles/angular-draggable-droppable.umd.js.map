{"version":3,"file":"angular-draggable-droppable.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://angular-draggable-droppable/lib/draggable-helper.provider.ts","ng://angular-draggable-droppable/lib/draggable-scroll-container.directive.ts","ng://angular-draggable-droppable/lib/draggable.directive.ts","ng://angular-draggable-droppable/lib/droppable.directive.ts","ng://angular-draggable-droppable/lib/drag-and-drop.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\nexport interface CurrentDragData {\n  clientX: number;\n  clientY: number;\n  dropData: any;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DraggableHelper {\n  currentDrag = new Subject<Subject<CurrentDragData>>();\n}\n","import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[mwlDraggableScrollContainer]'\n})\nexport class DraggableScrollContainerDirective {\n  constructor(public elementRef: ElementRef<HTMLElement>) {}\n}\n","import {\n  Directive,\n  OnInit,\n  ElementRef,\n  Renderer2,\n  Output,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnChanges,\n  NgZone,\n  SimpleChanges,\n  Inject,\n  TemplateRef,\n  ViewContainerRef,\n  Optional\n} from '@angular/core';\nimport { Subject, Observable, merge, ReplaySubject, combineLatest } from 'rxjs';\nimport {\n  map,\n  mergeMap,\n  takeUntil,\n  take,\n  takeLast,\n  pairwise,\n  share,\n  filter,\n  count,\n  startWith\n} from 'rxjs/operators';\nimport { CurrentDragData, DraggableHelper } from './draggable-helper.provider';\nimport { DOCUMENT } from '@angular/common';\nimport { DraggableScrollContainerDirective } from './draggable-scroll-container.directive';\n\nexport interface Coordinates {\n  x: number;\n  y: number;\n}\n\nexport interface DragAxis {\n  x: boolean;\n  y: boolean;\n}\n\nexport interface SnapGrid {\n  x?: number;\n  y?: number;\n}\n\nexport interface DragPointerDownEvent extends Coordinates {}\n\nexport interface DragStartEvent {\n  cancelDrag$: ReplaySubject<void>;\n}\n\nexport interface DragMoveEvent extends Coordinates {}\n\nexport interface DragEndEvent extends Coordinates {\n  dragCancelled: boolean;\n}\n\nexport type ValidateDrag = (coordinates: Coordinates) => boolean;\n\nexport interface PointerEvent {\n  clientX: number;\n  clientY: number;\n  event: MouseEvent | TouchEvent;\n}\n\n@Directive({\n  selector: '[mwlDraggable]'\n})\nexport class DraggableDirective implements OnInit, OnChanges, OnDestroy {\n  /**\n   * an object of data you can pass to the drop event\n   */\n  @Input()\n  dropData: any;\n\n  /**\n   * The axis along which the element is draggable\n   */\n  @Input()\n  dragAxis: DragAxis = { x: true, y: true };\n\n  /**\n   * Snap all drags to an x / y grid\n   */\n  @Input()\n  dragSnapGrid: SnapGrid = {};\n\n  /**\n   * Show a ghost element that shows the drag when dragging\n   */\n  @Input()\n  ghostDragEnabled: boolean = true;\n\n  /**\n   * Show the original element when ghostDragEnabled is true\n   */\n  @Input()\n  showOriginalElementWhileDragging: boolean = false;\n\n  /**\n   * Allow custom behaviour to control when the element is dragged\n   */\n  @Input()\n  validateDrag: ValidateDrag;\n\n  /**\n   * The cursor to use when dragging the element\n   */\n  @Input()\n  dragCursor: string = '';\n\n  /**\n   * The css class to apply when the element is being dragged\n   */\n  @Input()\n  dragActiveClass: string;\n\n  /**\n   * The element the ghost element will be appended to. Default is next to the dragged element\n   */\n  @Input()\n  ghostElementAppendTo: HTMLElement;\n\n  /**\n   * An ng-template to be inserted into the parent element of the ghost element. It will overwrite any child nodes.\n   */\n  @Input()\n  ghostElementTemplate: TemplateRef<any>;\n\n  /**\n   * Called when the element can be dragged along one axis and has the mouse or pointer device pressed on it\n   */\n  @Output()\n  dragPointerDown = new EventEmitter<DragPointerDownEvent>();\n\n  /**\n   * Called when the element has started to be dragged.\n   * Only called after at least one mouse or touch move event.\n   * If you call $event.cancelDrag$.emit() it will cancel the current drag\n   */\n  @Output()\n  dragStart = new EventEmitter<DragStartEvent>();\n\n  /**\n   * Called after the ghost element has been created\n   */\n  @Output()\n  ghostElementCreated = new EventEmitter();\n\n  /**\n   * Called when the element is being dragged\n   */\n  @Output()\n  dragging = new EventEmitter<DragMoveEvent>();\n\n  /**\n   * Called after the element is dragged\n   */\n  @Output()\n  dragEnd = new EventEmitter<DragEndEvent>();\n\n  /**\n   * @hidden\n   */\n  pointerDown$ = new Subject<PointerEvent>();\n\n  /**\n   * @hidden\n   */\n  pointerMove$ = new Subject<PointerEvent>();\n\n  /**\n   * @hidden\n   */\n  pointerUp$ = new Subject<PointerEvent>();\n\n  private eventListenerSubscriptions: {\n    mousemove?: () => void;\n    mousedown?: () => void;\n    mouseup?: () => void;\n    mouseenter?: () => void;\n    mouseleave?: () => void;\n    touchstart?: () => void;\n    touchmove?: () => void;\n    touchend?: () => void;\n    touchcancel?: () => void;\n  } = {};\n\n  private ghostElement: HTMLElement | null;\n\n  private destroy$ = new Subject();\n\n  /**\n   * @hidden\n   */\n  constructor(\n    private element: ElementRef<HTMLElement>,\n    private renderer: Renderer2,\n    private draggableHelper: DraggableHelper,\n    private zone: NgZone,\n    private vcr: ViewContainerRef,\n    @Optional() private scrollContainer: DraggableScrollContainerDirective,\n    @Inject(DOCUMENT) private document: any\n  ) {}\n\n  ngOnInit(): void {\n    this.checkEventListeners();\n\n    const pointerDragged$: Observable<any> = this.pointerDown$.pipe(\n      filter(() => this.canDrag()),\n      mergeMap((pointerDownEvent: PointerEvent) => {\n        // fix for https://github.com/mattlewis92/angular-draggable-droppable/issues/61\n        // stop mouse events propagating up the chain\n        if (pointerDownEvent.event.stopPropagation) {\n          pointerDownEvent.event.stopPropagation();\n        }\n\n        // hack to prevent text getting selected in safari while dragging\n        const globalDragStyle: HTMLStyleElement = this.renderer.createElement(\n          'style'\n        );\n        this.renderer.setAttribute(globalDragStyle, 'type', 'text/css');\n        this.renderer.appendChild(\n          globalDragStyle,\n          this.renderer.createText(`\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        `)\n        );\n        this.document.head.appendChild(globalDragStyle);\n\n        const startScrollPosition = this.getScrollPosition();\n\n        const scrollContainerScroll$ = new Observable(observer => {\n          const scrollContainer = this.scrollContainer\n            ? this.scrollContainer.elementRef.nativeElement\n            : 'window';\n          return this.renderer.listen(scrollContainer, 'scroll', e =>\n            observer.next(e)\n          );\n        }).pipe(\n          startWith(startScrollPosition),\n          map(() => this.getScrollPosition())\n        );\n\n        const currentDrag$ = new Subject<CurrentDragData>();\n        const cancelDrag$ = new ReplaySubject<void>();\n\n        this.zone.run(() => {\n          this.dragPointerDown.next({ x: 0, y: 0 });\n        });\n\n        const dragComplete$ = merge(\n          this.pointerUp$,\n          this.pointerDown$,\n          cancelDrag$,\n          this.destroy$\n        ).pipe(share());\n\n        const pointerMove = combineLatest<\n          PointerEvent,\n          { top: number; left: number }\n        >(this.pointerMove$, scrollContainerScroll$).pipe(\n          map(([pointerMoveEvent, scroll]) => {\n            return {\n              currentDrag$,\n              transformX: pointerMoveEvent.clientX - pointerDownEvent.clientX,\n              transformY: pointerMoveEvent.clientY - pointerDownEvent.clientY,\n              clientX: pointerMoveEvent.clientX,\n              clientY: pointerMoveEvent.clientY,\n              scrollLeft: scroll.left,\n              scrollTop: scroll.top\n            };\n          }),\n          map(moveData => {\n            if (this.dragSnapGrid.x) {\n              moveData.transformX =\n                Math.round(moveData.transformX / this.dragSnapGrid.x) *\n                this.dragSnapGrid.x;\n            }\n\n            if (this.dragSnapGrid.y) {\n              moveData.transformY =\n                Math.round(moveData.transformY / this.dragSnapGrid.y) *\n                this.dragSnapGrid.y;\n            }\n\n            return moveData;\n          }),\n          map(moveData => {\n            if (!this.dragAxis.x) {\n              moveData.transformX = 0;\n            }\n\n            if (!this.dragAxis.y) {\n              moveData.transformY = 0;\n            }\n\n            return moveData;\n          }),\n          map(moveData => {\n            const scrollX = moveData.scrollLeft - startScrollPosition.left;\n            const scrollY = moveData.scrollTop - startScrollPosition.top;\n            return {\n              ...moveData,\n              x: moveData.transformX + scrollX,\n              y: moveData.transformY + scrollY\n            };\n          }),\n          filter(\n            ({ x, y }) => !this.validateDrag || this.validateDrag({ x, y })\n          ),\n          takeUntil(dragComplete$),\n          share()\n        );\n\n        const dragStarted$ = pointerMove.pipe(\n          take(1),\n          share()\n        );\n        const dragEnded$ = pointerMove.pipe(\n          takeLast(1),\n          share()\n        );\n\n        dragStarted$.subscribe(() => {\n          this.zone.run(() => {\n            this.dragStart.next({ cancelDrag$ });\n          });\n\n          this.renderer.addClass(\n            this.element.nativeElement,\n            this.dragActiveClass\n          );\n\n          if (this.ghostDragEnabled) {\n            const rect = this.element.nativeElement.getBoundingClientRect();\n            const clone = this.element.nativeElement.cloneNode(\n              true\n            ) as HTMLElement;\n            if (!this.showOriginalElementWhileDragging) {\n              this.renderer.setStyle(\n                this.element.nativeElement,\n                'visibility',\n                'hidden'\n              );\n            }\n\n            if (this.ghostElementAppendTo) {\n              this.ghostElementAppendTo.appendChild(clone);\n            } else {\n              this.element.nativeElement.parentNode!.insertBefore(\n                clone,\n                this.element.nativeElement.nextSibling\n              );\n            }\n\n            this.ghostElement = clone;\n\n            this.setElementStyles(clone, {\n              position: 'fixed',\n              top: `${rect.top}px`,\n              left: `${rect.left}px`,\n              width: `${rect.width}px`,\n              height: `${rect.height}px`,\n              cursor: this.dragCursor,\n              margin: '0'\n            });\n\n            if (this.ghostElementTemplate) {\n              const viewRef = this.vcr.createEmbeddedView(\n                this.ghostElementTemplate\n              );\n              clone.innerHTML = '';\n              viewRef.rootNodes\n                .filter(node => node instanceof Node)\n                .forEach(node => {\n                  clone.appendChild(node);\n                });\n              dragEnded$.subscribe(() => {\n                this.vcr.remove(this.vcr.indexOf(viewRef));\n              });\n            }\n\n            this.zone.run(() => {\n              this.ghostElementCreated.emit();\n            });\n\n            dragEnded$.subscribe(() => {\n              clone.parentElement!.removeChild(clone);\n              this.ghostElement = null;\n              this.renderer.setStyle(\n                this.element.nativeElement,\n                'visibility',\n                ''\n              );\n            });\n          }\n\n          this.draggableHelper.currentDrag.next(currentDrag$);\n        });\n\n        dragEnded$\n          .pipe(\n            mergeMap(dragEndData => {\n              const dragEndData$ = cancelDrag$.pipe(\n                count(),\n                take(1),\n                map(calledCount => ({\n                  ...dragEndData,\n                  dragCancelled: calledCount > 0\n                }))\n              );\n              cancelDrag$.complete();\n              return dragEndData$;\n            })\n          )\n          .subscribe(({ x, y, dragCancelled }) => {\n            this.zone.run(() => {\n              this.dragEnd.next({ x, y, dragCancelled });\n            });\n            this.renderer.removeClass(\n              this.element.nativeElement,\n              this.dragActiveClass\n            );\n            currentDrag$.complete();\n          });\n\n        merge(dragComplete$, dragEnded$)\n          .pipe(take(1))\n          .subscribe(() => {\n            this.document.head.removeChild(globalDragStyle);\n          });\n\n        return pointerMove;\n      }),\n      share()\n    );\n\n    merge(\n      pointerDragged$.pipe(\n        take(1),\n        map(value => [, value])\n      ),\n      pointerDragged$.pipe(pairwise())\n    )\n      .pipe(\n        filter(([previous, next]) => {\n          if (!previous) {\n            return true;\n          }\n          return previous.x !== next.x || previous.y !== next.y;\n        }),\n        map(([previous, next]) => next)\n      )\n      .subscribe(\n        ({ x, y, currentDrag$, clientX, clientY, transformX, transformY }) => {\n          this.zone.run(() => {\n            this.dragging.next({ x, y });\n          });\n          if (this.ghostElement) {\n            const transform = `translate(${transformX}px, ${transformY}px)`;\n            this.setElementStyles(this.ghostElement, {\n              transform,\n              '-webkit-transform': transform,\n              '-ms-transform': transform,\n              '-moz-transform': transform,\n              '-o-transform': transform\n            });\n          }\n          currentDrag$.next({\n            clientX,\n            clientY,\n            dropData: this.dropData\n          });\n        }\n      );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.dragAxis) {\n      this.checkEventListeners();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribeEventListeners();\n    this.pointerDown$.complete();\n    this.pointerMove$.complete();\n    this.pointerUp$.complete();\n    this.destroy$.next();\n  }\n\n  private checkEventListeners(): void {\n    const canDrag: boolean = this.canDrag();\n    const hasEventListeners: boolean =\n      Object.keys(this.eventListenerSubscriptions).length > 0;\n\n    if (canDrag && !hasEventListeners) {\n      this.zone.runOutsideAngular(() => {\n        this.eventListenerSubscriptions.mousedown = this.renderer.listen(\n          this.element.nativeElement,\n          'mousedown',\n          (event: MouseEvent) => {\n            this.onMouseDown(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseup = this.renderer.listen(\n          'document',\n          'mouseup',\n          (event: MouseEvent) => {\n            this.onMouseUp(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchstart = this.renderer.listen(\n          this.element.nativeElement,\n          'touchstart',\n          (event: TouchEvent) => {\n            this.onTouchStart(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchend = this.renderer.listen(\n          'document',\n          'touchend',\n          (event: TouchEvent) => {\n            this.onTouchEnd(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchcancel = this.renderer.listen(\n          'document',\n          'touchcancel',\n          (event: TouchEvent) => {\n            this.onTouchEnd(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseenter = this.renderer.listen(\n          this.element.nativeElement,\n          'mouseenter',\n          () => {\n            this.onMouseEnter();\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseleave = this.renderer.listen(\n          this.element.nativeElement,\n          'mouseleave',\n          () => {\n            this.onMouseLeave();\n          }\n        );\n      });\n    } else if (!canDrag && hasEventListeners) {\n      this.unsubscribeEventListeners();\n    }\n  }\n\n  private onMouseDown(event: MouseEvent): void {\n    if (!this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove = this.renderer.listen(\n        'document',\n        'mousemove',\n        (mouseMoveEvent: MouseEvent) => {\n          this.pointerMove$.next({\n            event: mouseMoveEvent,\n            clientX: mouseMoveEvent.clientX,\n            clientY: mouseMoveEvent.clientY\n          });\n        }\n      );\n    }\n    this.pointerDown$.next({\n      event,\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n  }\n\n  private onMouseUp(event: MouseEvent): void {\n    if (this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove();\n      delete this.eventListenerSubscriptions.mousemove;\n    }\n    this.pointerUp$.next({\n      event,\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n  }\n\n  private onTouchStart(event: TouchEvent): void {\n    if (!this.eventListenerSubscriptions.touchmove) {\n      this.eventListenerSubscriptions.touchmove = this.renderer.listen(\n        'document',\n        'touchmove',\n        (touchMoveEvent: TouchEvent) => {\n          this.pointerMove$.next({\n            event: touchMoveEvent,\n            clientX: touchMoveEvent.targetTouches[0].clientX,\n            clientY: touchMoveEvent.targetTouches[0].clientY\n          });\n        }\n      );\n    }\n    this.pointerDown$.next({\n      event,\n      clientX: event.touches[0].clientX,\n      clientY: event.touches[0].clientY\n    });\n  }\n\n  private onTouchEnd(event: TouchEvent): void {\n    if (this.eventListenerSubscriptions.touchmove) {\n      this.eventListenerSubscriptions.touchmove();\n      delete this.eventListenerSubscriptions.touchmove;\n    }\n    this.pointerUp$.next({\n      event,\n      clientX: event.changedTouches[0].clientX,\n      clientY: event.changedTouches[0].clientY\n    });\n  }\n\n  private onMouseEnter(): void {\n    this.setCursor(this.dragCursor);\n  }\n\n  private onMouseLeave(): void {\n    this.setCursor('');\n  }\n\n  private canDrag(): boolean {\n    return this.dragAxis.x || this.dragAxis.y;\n  }\n\n  private setCursor(value: string): void {\n    this.renderer.setStyle(this.element.nativeElement, 'cursor', value);\n  }\n\n  private unsubscribeEventListeners(): void {\n    Object.keys(this.eventListenerSubscriptions).forEach(type => {\n      (this as any).eventListenerSubscriptions[type]();\n      delete (this as any).eventListenerSubscriptions[type];\n    });\n  }\n\n  private setElementStyles(\n    element: HTMLElement,\n    styles: { [key: string]: string }\n  ) {\n    Object.keys(styles).forEach(key => {\n      this.renderer.setStyle(element, key, styles[key]);\n    });\n  }\n\n  private getScrollPosition() {\n    if (this.scrollContainer) {\n      return {\n        top: this.scrollContainer.elementRef.nativeElement.scrollTop,\n        left: this.scrollContainer.elementRef.nativeElement.scrollLeft\n      };\n    } else {\n      return {\n        top: window.pageYOffset || document.documentElement.scrollTop,\n        left: window.pageXOffset || document.documentElement.scrollLeft\n      };\n    }\n  }\n}\n","import {\n  Directive,\n  OnInit,\n  ElementRef,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  NgZone,\n  Input,\n  Renderer2,\n  Optional\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { distinctUntilChanged, pairwise, filter, map } from 'rxjs/operators';\nimport { DraggableHelper } from './draggable-helper.provider';\nimport { DraggableScrollContainerDirective } from './draggable-scroll-container.directive';\n\nfunction isCoordinateWithinRectangle(\n  clientX: number,\n  clientY: number,\n  rect: ClientRect\n): boolean {\n  return (\n    clientX >= rect.left &&\n    clientX <= rect.right &&\n    clientY >= rect.top &&\n    clientY <= rect.bottom\n  );\n}\n\nexport interface DropEvent<T = any> {\n  dropData: T;\n}\n\n@Directive({\n  selector: '[mwlDroppable]'\n})\nexport class DroppableDirective implements OnInit, OnDestroy {\n  /**\n   * Added to the element when an element is dragged over it\n   */\n  @Input()\n  dragOverClass: string;\n\n  /**\n   * Added to the element any time a draggable element is being dragged\n   */\n  @Input()\n  dragActiveClass: string;\n\n  /**\n   * Called when a draggable element starts overlapping the element\n   */\n  @Output()\n  dragEnter = new EventEmitter<DropEvent>();\n\n  /**\n   * Called when a draggable element stops overlapping the element\n   */\n  @Output()\n  dragLeave = new EventEmitter<DropEvent>();\n\n  /**\n   * Called when a draggable element is moved over the element\n   */\n  @Output()\n  dragOver = new EventEmitter<DropEvent>();\n\n  /**\n   * Called when a draggable element is dropped on this element\n   */\n  @Output()\n  drop = new EventEmitter<DropEvent>(); // tslint:disable-line no-output-named-after-standard-event\n\n  currentDragSubscription: Subscription;\n\n  constructor(\n    private element: ElementRef<HTMLElement>,\n    private draggableHelper: DraggableHelper,\n    private zone: NgZone,\n    private renderer: Renderer2,\n    @Optional() private scrollContainer: DraggableScrollContainerDirective\n  ) {}\n\n  ngOnInit() {\n    this.currentDragSubscription = this.draggableHelper.currentDrag.subscribe(\n      drag$ => {\n        this.renderer.addClass(\n          this.element.nativeElement,\n          this.dragActiveClass\n        );\n        const droppableElement: {\n          rect?: ClientRect;\n          updateCache: boolean;\n          scrollContainerRect?: ClientRect;\n        } = {\n          updateCache: true\n        };\n\n        const deregisterScrollListener = this.renderer.listen(\n          this.scrollContainer\n            ? this.scrollContainer.elementRef.nativeElement\n            : 'window',\n          'scroll',\n          () => {\n            droppableElement.updateCache = true;\n          }\n        );\n\n        let currentDragDropData: any;\n        const overlaps$ = drag$.pipe(\n          map(({ clientX, clientY, dropData }) => {\n            currentDragDropData = dropData;\n            if (droppableElement.updateCache) {\n              droppableElement.rect = this.element.nativeElement.getBoundingClientRect();\n              if (this.scrollContainer) {\n                droppableElement.scrollContainerRect = this.scrollContainer.elementRef.nativeElement.getBoundingClientRect();\n              }\n              droppableElement.updateCache = false;\n            }\n            const isWithinElement = isCoordinateWithinRectangle(\n              clientX,\n              clientY,\n              droppableElement.rect as ClientRect\n            );\n            if (droppableElement.scrollContainerRect) {\n              return (\n                isWithinElement &&\n                isCoordinateWithinRectangle(\n                  clientX,\n                  clientY,\n                  droppableElement.scrollContainerRect as ClientRect\n                )\n              );\n            } else {\n              return isWithinElement;\n            }\n          })\n        );\n\n        const overlapsChanged$ = overlaps$.pipe(distinctUntilChanged());\n\n        let dragOverActive: boolean; // TODO - see if there's a way of doing this via rxjs\n\n        overlapsChanged$\n          .pipe(filter(overlapsNow => overlapsNow))\n          .subscribe(() => {\n            dragOverActive = true;\n            this.renderer.addClass(\n              this.element.nativeElement,\n              this.dragOverClass\n            );\n            this.zone.run(() => {\n              this.dragEnter.next({\n                dropData: currentDragDropData\n              });\n            });\n          });\n\n        overlaps$.pipe(filter(overlapsNow => overlapsNow)).subscribe(() => {\n          this.zone.run(() => {\n            this.dragOver.next({\n              dropData: currentDragDropData\n            });\n          });\n        });\n\n        overlapsChanged$\n          .pipe(\n            pairwise(),\n            filter(([didOverlap, overlapsNow]) => didOverlap && !overlapsNow)\n          )\n          .subscribe(() => {\n            dragOverActive = false;\n            this.renderer.removeClass(\n              this.element.nativeElement,\n              this.dragOverClass\n            );\n            this.zone.run(() => {\n              this.dragLeave.next({\n                dropData: currentDragDropData\n              });\n            });\n          });\n\n        drag$.subscribe({\n          complete: () => {\n            deregisterScrollListener();\n            this.renderer.removeClass(\n              this.element.nativeElement,\n              this.dragActiveClass\n            );\n            if (dragOverActive) {\n              this.renderer.removeClass(\n                this.element.nativeElement,\n                this.dragOverClass\n              );\n              this.zone.run(() => {\n                this.drop.next({\n                  dropData: currentDragDropData\n                });\n              });\n            }\n          }\n        });\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.currentDragSubscription) {\n      this.currentDragSubscription.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { DraggableDirective } from './draggable.directive';\nimport { DroppableDirective } from './droppable.directive';\nimport { DraggableScrollContainerDirective } from './draggable-scroll-container.directive';\n\n@NgModule({\n  declarations: [\n    DraggableDirective,\n    DroppableDirective,\n    DraggableScrollContainerDirective\n  ],\n  exports: [\n    DraggableDirective,\n    DroppableDirective,\n    DraggableScrollContainerDirective\n  ]\n})\nexport class DragAndDropModule {}\n"],"names":["Subject","Injectable","Directive","ElementRef","EventEmitter","filter","mergeMap","Observable","startWith","map","ReplaySubject","merge","share","combineLatest","takeUntil","take","takeLast","count","pairwise","Renderer2","NgZone","ViewContainerRef","Optional","Inject","DOCUMENT","Input","Output","distinctUntilChanged","NgModule"],"mappings":"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"}
